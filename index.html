<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¬°Feliz Cumplea√±os Silvia!</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;700&display=swap');

        /* --- CORRECCI√ìN 1: Evitar el scroll horizontal y el temblor general --- */
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
            min-height: 100vh;
            font-family: 'Quicksand', sans-serif;
            overflow-x: hidden;
            cursor: crosshair;
            /* Suavizado de fuentes y optimizaci√≥n 3D */
            -webkit-font-smoothing: antialiased;
            perspective: 1000px;
        }

        #cursor-bee {
            position: fixed;
            top: 0;
            left: 0;
            font-size: 2rem;
            pointer-events: none;
            z-index: 9999;
            transition: transform 0.1s ease-out; /* Transici√≥n m√°s suave */
            will-change: transform, left, top;
            filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.2));
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
            position: relative;
            z-index: 10;
        }

        .welcome-card, .quiz-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
            margin-top: 60px;
            border: 4px solid #FFD700;
            position: relative;
            /* CORRECCI√ìN 2: Quitar transition: all para evitar parpadeos */
            transition: opacity 0.3s ease; 
        }

        .card-corner {
            position: absolute;
            top: -20px;
            right: -20px;
            width: 80px;
            height: 80px;
            background: #FFD700;
            transform: rotate(45deg);
        }

        h1 {
            font-family: 'Pacifico', cursive;
            color: #d35400;
            font-size: 3rem;
            margin: 10px 0;
            text-shadow: 1px 1px 0px #fff;
        }

        .quiz-option {
            display: block;
            width: 100%;
            padding: 18px;
            margin: 12px 0;
            border: 2px solid #8BC34A;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            font-size: 1.15rem;
            transition: background 0.3s, transform 0.2s; /* Transiciones espec√≠ficas */
            font-weight: bold;
            color: #555;
        }

        .quiz-option:hover {
            background: #8BC34A;
            color: white;
            transform: scale(1.02);
        }

        .hidden { display: none; }

        .timeline {
            position: relative;
            margin-top: 60px;
            padding-bottom: 100px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 100%;
            background: repeating-linear-gradient(to bottom, #8BC34A 0, #8BC34A 10px, transparent 10px, transparent 20px);
            z-index: -1;
        }

        .timeline-item {
            margin: 80px 0; /* M√°s espacio entre cartas para que no se amontonen */
            position: relative;
            width: 100%;
            display: flex;
            justify-content: center;
            perspective: 1500px;
        }

        /* --- CORRECCI√ìN 3: Estabilidad de la animaci√≥n de cartas --- */
        .timeline-content {
            background: white;
            padding: 25px;
            border-radius: 15px;
            width: 90%; 
            max-width: 600px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            text-align: left;
            position: relative;
            border-bottom: 5px solid #FFD700;
            
            /* Animaci√≥n 3D optimizada */
            opacity: 0;
            transform-origin: top center;
            transform: rotateX(-60deg); /* Angulo menos agresivo para reducir flickering */
            transition: transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.5s ease;
            backface-visibility: hidden; /* Clave para evitar parpadeo en animaci√≥n 3D */
            will-change: transform, opacity;
        }

        .timeline-item.visible .timeline-content {
            opacity: 1;
            transform: rotateX(0deg);
        }

        .timeline-icon {
            position: absolute;
            left: 50%;
            top: -25px;
            transform: translateX(-50%);
            background: #fff;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 4px solid #FFD700;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            z-index: 5;
            box-shadow: 0 5px 10px rgba(0,0,0,0.1);
        }

        /* --- CORRECCI√ìN 4: IM√ÅGENES AJUSTADAS --- */
        .photo-frame {
            width: 100%;
            background-color: #fff;
            padding: 10px;
            padding-bottom: 25px; /* Estilo Polaroid */
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin-bottom: 15px;
            margin-top: 15px;
            transform: rotate(-1deg);
            transition: transform 0.3s;
            
            /* Flexbox para centrar la imagen dentro del marco */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .photo-frame:hover {
            transform: rotate(0deg) scale(1.01);
        }
        
        .photo-frame img {
            display: block;
            width: auto;             /* El ancho se adapta */
            height: auto;            /* El alto se adapta */
            max-width: 100%;         /* No salirse del ancho del contenedor */
            max-height: 600px;       /* L√≠mite de altura para que fotos largas no sean eternas */
            object-fit: contain;     /* NUNCA recortar la imagen, siempre mostrarla entera */
            border: 1px solid #eee;
        }

        .note-text {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #444;
            font-style: italic;
            margin-top: 15px;
        }

        #error-msg {
            margin-top: 15px;
            font-weight: bold;
            display: none;
            padding: 10px;
            border-radius: 8px;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        .planted-flower {
            position: absolute;
            font-size: 2rem;
            pointer-events: none;
            animation: grow 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 1;
        }

        @keyframes grow {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        @media (max-width: 600px) {
            .timeline-content { width: 85%; }
            h1 { font-size: 2.5rem; }
            /* En m√≥vil las im√°genes pueden ser un poco m√°s peque√±as */
            .photo-frame img { max-height: 450px; }
        }
    </style>
</head>
<body>

    <audio id="bgMusic" loop>
        <source src="Music_Background.mp3" type="audio/mpeg">
        <source src="Music_Background.mp3" type="audio/mp3">
    </audio>

    <div id="cursor-bee">üêù</div>

    <div class="container">
        
        <!-- 1. BIENVENIDA -->
        <div class="welcome-card" id="step1">
            <div class="card-corner"></div>
            <h1 style="color:#e67e22;">¬°Hola Silvia!</h1>
            <p style="font-size: 1.3rem;">De Ecuador üá™üá® para Rusia üá∑üá∫</p>
            <p>Hay un regalo digital esper√°ndote...</p>
            <p style="color:#888; font-size:0.9rem;">(Pista: Haz clic en el fondo para plantar flores üå∏)</p>
            <br>
            <button class="quiz-option" onclick="nextStep()" style="background:#FFD700; color:#333; border:none; font-weight:bold; font-size:1.3rem; box-shadow: 0 4px 0 #cfaf00;">
                Abrir Regalo üéÅ
            </button>
        </div>

        <!-- 2. QUIZ -->
        <div class="quiz-card hidden" id="step2">
            <h2>Pregunta de Seguridad üîê</h2>
            <p style="font-size:1.2rem;">¬øQu√© es lo que m√°s le gusta a la Silvia?</p>
            
            <button class="quiz-option" onclick="wrongAnswer('arabes')">üë≥‚Äç‚ôÇÔ∏è Los √°rabes</button>
            <button class="quiz-option" onclick="correctAnswer()">üåª Los girasoles y su tierrita</button>
            <button class="quiz-option" onclick="wrongAnswer('plata')">üí∞ La plata</button>
            
            <div id="error-msg"></div>
        </div>

        <!-- 3. TIMELINE -->
        <div class="hidden" id="step3">
            <h1 style="margin-top:20px; color:#d35400;">¬°Feliz Cumplea√±os!</h1>
            <p>Desliza para abrir tus cartas üëá</p>
            
            <div class="timeline" id="gallery-container"></div>

            <div style="margin-top:80px; padding-bottom:50px;">
                <h2>üíõ Te extra√±amos mucho üíõ</h2>
            </div>
        </div>
    </div>

    <script>
        // --- DATOS ---
        const timelineData = [
            { 
                id: 1, 
                title: "La Esencia",
                ext: "png", 
                text: "Que estemos lejos me ha ense√±ado que las amistades verdaderas no se miden por la frecuencia, sino por la esencia. Y resulta que la nuestra es de esas que, cuando nos volvemos a encontrar, es como si el tiempo no hubiera pasado y el cari√±o sigue intacto." 
            },
            { id: 2, title: "Momentos", text: "Coleccionando sonrisas y buenos tiempos que valen oro." },
            { 
                id: 3, 
                title: "Aventuras", 
                ext: "png", 
                text: "Cada foto es una historia que vale la pena recordar una y otra vez." 
            },
            { 
                id: 4, 
                title: "Tu Magia",
                text: "Gracias por ser la alegr√≠a de esos d√≠as grises, por tus locuras, por esa magia que solo t√∫ tienes." 
            },
            { 
                id: 5, 
                title: "Risas", 
                ext: "png", 
                text: "La felicidad se ve mejor cuando es compartida y viene en frascos peque√±os (como t√∫)." 
            },
            { 
                id: 6, 
                title: "Random",
                text: "Algunas im√°genes random de relleno, no se nos ocurri√≥ que poner." 
            },
            { id: 7, title: "Recuerdos", text: "Instantes que se quedan grabados para siempre en el coraz√≥n." },
            { id: 8, title: "Amistad", text: "Aunque pasen los a√±os y los kil√≥metros, la amistad sigue intacta." },
            { 
                id: 9, 
                title: "Tu Huella",
                text: "Nos dejaste recuerdos bonitos para llenar el vac√≠o que dejaste y recordar con alegr√≠a esos momentos. Ojal√° en un futuro vuelvan esas excusas para salir a lokear." 
            },
            { 
                id: 10, 
                title: "Aqu√≠ te esperamos",
                text: "Recuerda que aqu√≠ te esperamos para crear nuevos momentos y recuerdos inolvidables." 
            },
            { 
                id: 11, 
                title: "Tu Lugar",
                text: "Tienes una familia que te quiere y te ama, amigos que te extra√±an y est√°n orgullosos de ti. Est√°s cumpliendo metas y sue√±os por all√°, pero siempre tendr√°s un lugar aqu√≠." 
            }
        ];

        // --- GENERADOR ---
        const galleryContainer = document.getElementById('gallery-container');
        const icons = ['üåª', 'üêù', '‚ú®', 'üíõ', 'üå∏', 'üì∏'];

        timelineData.forEach((item, index) => {
            const icon = icons[index % icons.length];
            const extension = item.ext || 'jpg';
            
            const html = `
                <div class="timeline-item">
                    <div class="timeline-content">
                        <div class="timeline-icon">${icon}</div>
                        <h3 style="color:#d35400; margin-top:15px;">${item.title}</h3>
                        <div class="photo-frame">
                            <img src="FCS_${item.id}.${extension}" alt="Foto ${item.id}" onerror="this.src='https://via.placeholder.com/400x600?text=Foto+No+Encontrada'">
                        </div>
                        <p class="note-text">"${item.text}"</p>
                    </div>
                </div>
            `;
            galleryContainer.innerHTML += html;
        });

        // --- INTERACCI√ìN ---
        const bee = document.getElementById('cursor-bee');
        let mouseX = 0, mouseY = 0;
        let beeX = 0, beeY = 0;

        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
        });

        function animateBee() {
            // Suavizado del movimiento
            beeX += (mouseX - beeX) * 0.1;
            beeY += (mouseY - beeY) * 0.1;
            bee.style.left = (beeX + 15) + 'px';
            bee.style.top = (beeY + 15) + 'px';
            requestAnimationFrame(animateBee);
        }
        animateBee();

        document.addEventListener('click', (e) => {
            // Evitar plantar flores si se clickea un bot√≥n
            if(e.target.closest('button')) return;
            
            const flower = document.createElement('div');
            const flowers = ['üåª', 'üå∏', 'üåπ', 'üå∑', 'üåº', 'üå∫'];
            flower.innerText = flowers[Math.floor(Math.random() * flowers.length)];
            flower.classList.add('planted-flower');
            flower.style.left = (e.pageX - 15) + 'px';
            flower.style.top = (e.pageY - 15) + 'px';
            flower.style.transform = `rotate(${Math.random() * 60 - 30}deg)`;
            document.body.appendChild(flower);
        });

        function nextStep() {
            document.getElementById('step1').classList.add('hidden');
            document.getElementById('step2').classList.remove('hidden');
        }

        function wrongAnswer(type) {
            const msg = document.getElementById('error-msg');
            msg.style.display = 'block';
            msg.style.backgroundColor = '#ffebee';
            msg.style.color = '#c62828';
            
            if(type === 'arabes') {
                msg.innerText = "Jajaja üòÇ Bueno... quiz√°s s√≠, pero hoy NO es la respuesta correcta.";
            } else if (type === 'plata') {
                msg.innerText = "¬°A todos! üí∏ Pero hay algo m√°s importante en tu coraz√≥n...";
            }
        }

        function correctAnswer() {
            document.getElementById('step2').classList.add('hidden');
            document.getElementById('step3').classList.remove('hidden');
            const audio = document.getElementById('bgMusic');
            audio.volume = 0.6;
            audio.play().catch(e => console.log("Audio requiere toque previo"));
            celebrate();
            // Peque√±o retraso para dar tiempo al navegador a renderizar antes de animar
            setTimeout(revealItems, 200);
        }

        function celebrate() {
            for(let i=0; i<40; i++) {
                setTimeout(() => {
                    const el = document.createElement('div');
                    el.innerText = Math.random() > 0.5 ? 'üêù' : 'üåª';
                    el.style.position = 'fixed';
                    el.style.left = Math.random() * 100 + 'vw';
                    el.style.top = '-50px';
                    el.style.fontSize = (Math.random() * 20 + 20) + 'px';
                    el.style.transition = 'top 3s ease-in, transform 3s linear';
                    el.style.zIndex = '100';
                    document.body.appendChild(el);
                    setTimeout(() => { 
                        el.style.top = '110vh'; 
                        el.style.transform = `rotate(${Math.random() * 360}deg)`;
                    }, 50);
                    setTimeout(() => el.remove(), 3100);
                }, i * 80);
            }
        }

        window.addEventListener('scroll', revealItems);

        function revealItems() {
            const items = document.querySelectorAll('.timeline-item');
            const windowHeight = window.innerHeight;
            const elementVisible = 100; // Margen de activaci√≥n

            items.forEach(item => {
                const rect = item.getBoundingClientRect();
                // Verificamos si el elemento est√° visible en la ventana
                if (rect.top < windowHeight - elementVisible && rect.bottom > 0) {
                    item.classList.add('visible');
                }
            });
        }
    </script>
</body>
</html>
